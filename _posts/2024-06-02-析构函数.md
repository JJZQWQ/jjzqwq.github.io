---
layout:     post
title:      C++面向对象
subtitle:   我的疑问
date:       2024-06-02
author:     陈佳兴
header-img: img/the-first.png
catalog:   true
tags:
    - C++笔记
---
# 面向对象
## 析构函数
在C++中，析构函数是一个特殊的成员函数，它在对象生命周期结束时自动执行，用于进行清理工作，比如释放资源、关闭文件等。析构函数的执行时机取决于对象的存储期和作用域：

1. **局部对象**：当局部对象的作用域结束时（例如，一个函数内部创建的对象在函数返回时），其析构函数会被调用。

2. **静态局部对象**：静态局部对象在程序的整个运行期间存在，它们的析构函数通常在`main`函数结束后、程序完全结束前被调用。

3. **全局对象**：全局对象的析构函数在程序结束执行时被调用，通常在所有`main`函数的活动都完成后。

4. **动态分配的对象**：对于通过`new`操作符动态创建的对象，析构函数在`delete`操作符被显式调用时执行。

5. **临时对象**：临时对象（例如函数返回的对象）的析构函数通常在表达式结束时被调用。

6. **通过智能指针管理的对象**：例如，使用`std::unique_ptr`或`std::shared_ptr`管理的对象，其析构函数在智能指针的生命周期结束时被调用，例如智能指针本身被销毁或重置。

这些规则确保了资源的正确管理和释放，避免了内存泄漏等问题。理解析构函数的执行时机对于编写稳定和高效的C++程序至关重要。
